{"version":3,"file":"static/js/449.c05ff57b.chunk.js","mappings":"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","sources":["components/Video/Video.jsx","webpack://genesis_test_task/./src/pages/LessonPage/LessonPage.module.scss?94ee","pages/LessonPage/LessonPage.jsx","services/api.js"],"sourcesContent":["import React from 'react';\nimport videojs from 'video.js';\nimport 'video.js/dist/video-js.css';\n\nexport const Video = (props) => {\n  const videoRef = React.useRef(null);\n  const playerRef = React.useRef(null);\n  const {options, onReady} = props;\n\n  React.useEffect(() => {\n\n    if (!playerRef.current) {\n   \n      const videoElement = document.createElement(\"video-js\");\n\n      videoElement.classList.add('vjs-big-play-centered');\n      videoRef.current.appendChild(videoElement);\n\n      const player = playerRef.current = videojs(videoElement, options, () => {\n        onReady && onReady(player);\n      });\n\n    } else {\n      const player = playerRef.current;\n\n      player.autoplay(options.autoplay);\n      player.src(options.sources);\n    }\n  }, [options, videoRef, onReady]);\n\n  React.useEffect(() => {\n    const player = playerRef.current;\n\n    return () => {\n      if (player && !player.isDisposed()) {\n        player.dispose();\n        playerRef.current = null;\n      }\n    };\n  }, [playerRef]);\n\n  return (\n    <div data-vjs-player>\n      <div ref={videoRef} />\n    </div>\n  );\n}\n\nexport default Video;","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"LessonPage_container__kcEpz\",\"videoContainer\":\"LessonPage_videoContainer__4-f8C\",\"lessonsListContainer\":\"LessonPage_lessonsListContainer__jIqww\",\"title\":\"LessonPage_title__ta86M\",\"lessonTitle\":\"LessonPage_lessonTitle__4RN-J\",\"description\":\"LessonPage_description__qP5Oa\",\"info\":\"LessonPage_info__+7+fg\",\"listItem\":\"LessonPage_listItem__7a3xV\",\"lockedVideoInfo\":\"LessonPage_lockedVideoInfo__MxVAJ\"};","import { useEffect, useState } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { getCourseById } from 'services/api';\nimport scss from './LessonPage.module.scss';\nimport { Loader } from 'components/Loader/Loader';\nimport { BsFillLockFill } from 'react-icons/bs';\nimport React from 'react';\nimport Notiflix from 'notiflix';\nimport { Video } from '../../components/Video/Video';\n\nconst LessonPage = () => {\n  const getButton = localStorage.getItem('Button')\n    ? localStorage.getItem('Button')\n    : null;\n\n  const navigate = useNavigate();\n  const { id } = useParams();\n  const [isActive, setIsActive] = useState(getButton);\n  const [courseInfo, setCourseInfo] = useState(null);\n  const [error, setError] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [lesson, setLesson] = useState(null);\n  const playerRef = React.useRef(null);\n\n  useEffect(() => {\n    if (!id) {\n      navigate('/');\n      Notiflix.Notify.info('Choose course first, please');\n    }\n    const getCourseInfo = async () => {\n      try {\n        setIsLoading(true);\n        const course = await getCourseById(id);\n        setCourseInfo(course);\n      } catch {\n        setError(error.message);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    getCourseInfo(id);\n  }, [id, error, navigate]);\n\n  if (!courseInfo) {\n    return;\n  }\n\n  const { lessons, title, description,duration, rating, previewImageLink } = courseInfo;\n\n  lessons.sort((first, second)=> first.order - second.order );\n\n  const filterLessons = id => {\n    setLesson(lessons.find(lesson => lesson.id === id));\n  };\n\n  const handleClick = id => {\n    filterLessons(id);\n    localStorage.setItem('Button', id);\n    setIsActive(id);\n  };\n\n  const videoOptions = {\n    controls: true,\n    responsive: true,\n    fluid: true,\n    autoplay: true,\n    sources: [\n      {\n        src: lesson?.link || lessons[0].link,\n        type: 'application/x-mpegURL',\n      },\n    ],\n    techOrder: ['html5'],\n  };\n\n  const handlePlayer = player => {\n    playerRef.current = player;\n\n    if (localStorage.getItem('Seconds')) {\n      player.currentTime(localStorage.getItem('Seconds'));\n    }\n    player.on('timeupdate', function () {\n      localStorage.setItem('Seconds', player.cache_.currentTime);\n    });\n  };\n\n  return (\n    <div className={scss.container}>\n      {isLoading ? (\n        <Loader />\n      ) : (\n        <>\n          <h1 className={scss.title}>{title}</h1>\n          <div className={scss.videoContainer}>\n            <img src={previewImageLink + '/cover.webp'} alt={title} />\n          </div>\n          <div className={scss.videoInfo}>\n            <p className={scss.description}>{description}</p>\n          <div className={scss.info}>\n              <p>Rating: {rating}</p>\n            <p>Duration: {Math.round(duration/60)} min</p>\n            </div>\n            <h3 className={scss.lessonTitle}>Lessons:</h3>\n            <div>               \n              <ul className={scss.lessonsListContainer}>\n                {lessons?.map(lesson => (\n                  <li className={scss.listItem} key={lesson.id}>\n                    <button\n                      onClick={() => handleClick(lesson.id)}\n                      className={isActive === lesson.id ? 'active' : undefined}\n                    >\n                      {lesson.order}.{lesson.title}\n                      {lesson.status === 'locked' && <BsFillLockFill />}\n                    </button>\n                  </li>\n                ))}\n              </ul>\n              {lesson?.status === 'locked' ? (\n                <div className={scss.lockedVideoInfo}>\n                  <span>This video is Locked </span>\n                  <BsFillLockFill />\n                </div>\n              ) : (\n                <Video options={videoOptions} onReady={handlePlayer} />\n              )}\n            </div>\n          </div>\n        </>\n      )}\n      {error !== null && <p>Oops, some error occured... Message: {error}</p>}\n    </div>\n  );\n};\n\nexport default LessonPage;\n","\nimport axios from 'axios';\n\nconst BASE_URL = 'https://api.wisey.app/api/v1';\n\naxios.defaults.baseURL = `${BASE_URL}`;\n\n\nconst setAuthHeader = token => {\n  axios.defaults.headers.common.Authorization = `Bearer ${token}`;\n};\n\n\nconst getToken = async () => {\n  try {\n    const response = await axios.get('/auth/anonymous?platform=subscriptions', {\n        headers: {\n            'Access-Control-Allow-Origin': '*',\n            'Content-Type': 'application/json',\n          },\n        \n    });\n    \n    setAuthHeader(response.data.token);\n  } catch (error) {\n    console.log(error);\n  }\n};\n\nconst getAllCourses = async () => {\n  try {\n    await getToken();\n    const {data} = await axios.get('/core/preview-courses', {headers: {\n        'Access-Control-Allow-Origin': '*',\n        'Content-Type': 'application/json',\n      },\n    });\n    return data;\n  } catch (error) {\n    console.log(error);\n  }\n};\n\nconst getCourseById = async id => {\n  try {\n    await getToken();\n    const {data} = await axios.get(`/core/preview-courses/${id}`, {headers: {\n      'Access-Control-Allow-Origin': '*',\n      'Content-Type': 'application/json',}\n    });\n    return data;\n  } catch (error) {\n    console.log(error);\n  }\n};\n\nexport { getAllCourses, getCourseById };"],"names":["Video","props","videoRef","React","playerRef","options","onReady","current","player","autoplay","src","sources","videoElement","document","createElement","classList","add","appendChild","videojs","isDisposed","dispose","_jsx","children","ref","getButton","localStorage","getItem","navigate","useNavigate","id","useParams","_useState","useState","_useState2","_slicedToArray","isActive","setIsActive","_useState3","_useState4","courseInfo","setCourseInfo","_useState5","_useState6","error","setError","_useState7","_useState8","isLoading","setIsLoading","_useState9","_useState10","lesson","setLesson","useEffect","Notiflix","getCourseInfo","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","course","wrap","_context","prev","next","getCourseById","sent","t0","message","finish","stop","apply","arguments","lessons","title","description","duration","rating","previewImageLink","sort","first","second","order","handleClick","find","filterLessons","setItem","videoOptions","controls","responsive","fluid","link","type","techOrder","_jsxs","className","scss","Loader","_Fragment","alt","Math","round","map","onClick","undefined","status","BsFillLockFill","currentTime","on","cache_","axios","concat","getToken","response","headers","token","data","console","log","getAllCourses","_ref2","_callee2","_yield$axios$get","_context2","abrupt","_ref3","_callee3","_yield$axios$get2","_context3","_x"],"sourceRoot":""}